
@{
    ViewBag.Title = "Requests List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model List<OnlineApprovals.DTOs.RequestDTO>
    @using OnlineApprovals.BLL.StaticData
<div class="page-header">
    <div class="page-header-content">
        <div class="page-title">
            <h4><i class="icon-arrow-left52 position-left"></i> <span class="text-semibold">Home</span> - Show Requests List</h4>
        </div>

    </div>

</div>
<div class="panel panel-flat">
    <table class="table datatable-save-state">
        <thead>
            <tr>
                <th>ID</th>
                <th>ClaimNumber</th>
                <th>Medical ID</th>
                <th>Creation Date</th>
                <th>CallCenter Assignee</th>
                <th>Status</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody id="TableBody">
          @foreach (var item in Model)
          {
            <tr>
                <td>@item.ID</td>
                <td> <a href="/Request/ManageRequest?RequestID=@item.ID">@item.ClaimNumber</a></td>
                <td>@item.MedicalID</td>
                <td>@item.CreationTime</td>
                <td>@item.CallCenterAssignee</td>

                <td ><span class="label"  style="background-color: @item.Color">@item.Status</span></td>
                <td class="text-center">
                    <ul class="icons-list">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="icon-menu9"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li><a href="/Request/ManageRequest?RequestID=@item.ID"><i class="icon-arrow-right16"></i>Go To Details</a></li>
                               @if (@item.StatusID == (int)StaticEnums.RequestStatus.Approved)
                               {
                                   <li><button type="button" class="btn btn-info btn-sm" onclick="ShowDetails(@item.ID)" id="ShowInvoice"
                                                data-toggle="modal" data-target="#Invoice">
                                    View Demanded Drugs <i class="icon-three-bars position-right"></i></button>     </li> 
                               }                                                               
                            </ul>
                        </li>
                    </ul>
                </td>
            </tr>
              }
        </tbody>
    </table>
</div>
<script src="~/global_assets/js/plugins/tables/datatables/datatables.min.js"></script>
<script src="~/global_assets/js/plugins/forms/selects/select2.min.js"></script>
<script src="~/global_assets/js/demo_pages/datatables_basic.js"></script>
<script src="~/global_assets/js/plugins/ui/ripple.min.js"></script>
<script src="~/Scripts/Helpers/HelperScript.js"></script>
<script src="~/Scripts/ViewsJS/Request/ShowRequestList.js"></script>
<script src="~/global_assets/js/demo_pages/components_modals.js"></script>




<div id="Invoice" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h6 class="modal-title">Request Summary</h6>
            </div>
            <div class="modal-body">
               
                <div id="PartialView1">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>

</div>

<script>

    
    
 



</script>