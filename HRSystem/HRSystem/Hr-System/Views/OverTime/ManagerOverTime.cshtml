@model IEnumerable<Hr_System.Models.OverTime>
@{
    ViewBag.Title = "ManagerOverTime";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="x_panel">
    <div class="x_title">
        <h2>OverTimes</h2>
        <ul class="nav navbar-right panel_toolbox">
            <li>
                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a href="#">Settings 1</a>
                    </li>
                    <li>
                        <a href="#">Settings 2</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="close-link"><i class="fa fa-close"></i></a>
            </li>
        </ul>
        <div class="clearfix"></div>
    </div>
    <div class="x_content">

        <p>All Users</p>
    
        @*@for (var userss in ((List<string>) ViewBag.users)){*@
            <table class="table table-striped projects">
                <thead>
                    <tr>
                        <th style="width: 1%">#</th>
                        <th style="width: 20%">Member Name </th>
                        <th>Duration</th>

                        <th>Status</th>
                        <th style="width: 20%">#Edit</th>
                    </tr>
                </thead>

                <tbody>
     @foreach (var user in ((List<string>) ViewBag.users)){
        
                    <tr>
                        <td>#</td>
                        <td>
                            <a>@user</a>
                            <br>
                       
                        </td>
                        <td>
                            <ul class="list-inline">
                                <li>
                             from @ViewBag.start To @ViewBag.end
                                </li>
                      
                            </ul>
                        </td>

                        <td>
                            <button type="button" class="btn btn-success btn-xs">PendingManagerApproval</button>
                        </td>
                        <td>
                            @Html.ActionLink("Details", "GetAllOverTimeRequestsForManager",new { user = @user, start = @ViewBag.stdate, end = @ViewBag.eddate })
                            @*@Html.ActionLink("September", "ManagerOverTime", new { @class = "btn btn-primary btn-xs "}, new { sdate = "2016-08-21", edate = "2016-09-20" })*@
                            @*<a href="javascript:approveAll();" class="btn btn-primary btn-xs"><i class="fa fa-folder"></i> View </a>*@
                            <a href="javascript:approveAll('@user','@ViewBag.stdate','@ViewBag.eddate','ApprovedByManager','You have approved all overtimes requested bt @user');" class="btn btn-info btn-xs"><i class="fa fa-pencil"></i> Approve </a>
                            <a href="javascript:approveAll('@user','@ViewBag.stdate','@ViewBag.eddate','RejectedByManager','You have Rejected all overtimes requested bt @user');" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i> Reject </a>
                        </td>
                    </tr>
}
                </tbody>
            </table>
     
        <!-- start project list -->
        @*<table class="table table-striped projects">
            <thead>
                <tr>
                    <th style="width: 1%">#</th>
                    <th style="width: 20%">Member Name </th>
                    <th>Duration</th>
                   
                    <th>Status</th>
                    <th style="width: 20%">#Edit</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>#</td>
                    <td>
                        <a>Pesamakini Backend UI</a>
                        <br>
                        <small>Created 01.01.2015</small>
                    </td>
                    <td>
                        <ul class="list-inline">
                            <li>
                                <img src="http://localhost/personal/njoroge/assets3/img.jpg" class="avatar" alt="Avatar">
                            </li>
                            <li>
                                <img src="http://localhost/personal/njoroge/assets3/img.jpg" class="avatar" alt="Avatar">
                            </li>
                            <li>
                                <img src="http://localhost/personal/njoroge/assets3/img.jpg" class="avatar" alt="Avatar">
                            </li>
                            <li>
                                <img src="http://localhost/personal/njoroge/assets3/img.jpg" class="avatar" alt="Avatar">
                            </li>
                        </ul>
                    </td>
                    
                    <td>
                        <button type="button" class="btn btn-success btn-xs">Success</button>
                    </td>
                    <td>
                        <a href="#" class="btn btn-primary btn-xs"><i class="fa fa-folder"></i> View </a>
                        <a href="#" class="btn btn-info btn-xs"><i class="fa fa-pencil"></i> Approve </a>
                        <a href="#" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i> Reject </a>
                    </td>
                </tr>
             
            </tbody>
        </table>*@
        <!-- end project list -->

    </div>
</div>
<script src="~/js/jquery-1.11.3.min.js"></script>
<script>

    function approveAll(name, start, end, status, mesga) {

        var data = {
            name: name,
            start: start,
            end: end,
            status: status
        };
        $.ajax({
            url: "@Url.Action("updatefieldsbyname", "OverTime")",
            type: "Get",
            dataType: "json",
            data:data,
            success: function (data) {

                alert(mesga);

            },
            error: function (error) {
                alert("Error Please contact System Developer");

            }
        });
        @*var x = '@ViewBag.stdate';
        var c = '@ViewBag.eddate';*@
        @*window.location.href = '@Url.Action("ManagerOverTime", "OverTime", new { @ViewBag.stdate, @ViewBag.eddate })';*@

    }

</script>